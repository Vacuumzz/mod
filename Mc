from .. import loader, utils 
from telethon.tl.types import ChatBannedRights as cb 
from telethon.tl.functions.messages import EditChatDefaultBannedRightsRequest as br 
 
 
@loader.tds 
class MuteChatMod(loader.Module): 
    """–ú—É—Ç —á–∞—Ç–∞.""" 
    strings = {'name': 'MuteChat'} 
     
    async def client_ready(self, client, db): 
        self.db = db 
         
    async def mccmd(self, message): 
        """–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –º—É—Ç —á–∞—Ç–∞.""" 
        if utils.get_args_raw(message) == "clearall": 
            self.db.set("MuteChat", "mc", []) 
            return await message.edit("–û—Ç–∫–ª—é—á–µ–Ω–æ –≤–æ –≤—Å–µ—Ö —á–∞—Ç–∞—Ö.") 
        if not message.is_private: 
            chat = await message.get_chat() 
            if not chat.admin_rights and not chat.creator: 
                return await message.edit("—Å—ç—Ä,–≤—ã —Ç—É—Ç –Ω–µ –∞–¥–º–∏–Ω.") 
            else: 
                if chat.admin_rights.ban_users == False: 
                    return await message.edit("–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤.") 
            mc = self.db.get("MuteChat", "mc", []) 
            chatid = str(message.chat_id) 
            if chatid in mc: 
                await message.client(br(message.chat_id, cb(until_date=None, send_messages=None))) 
                mc.remove(chatid) 
                self.db.set("MuteChat", "mc", mc) 
              utils.answer(return await message.edit("<b>–ß–∞—Ç –æ—Ç–∫—Ä—ã—Ç ‚úÖ</b>")) 
            else: 
                await message.client(br(message.chat_id, cb(until_date=0, send_messages=True))) 
                mc.append(chatid) 
                self.db.set("MuteChat", "mc", mc) 
               utils.answer(await message.edit("<b>–ß–∞—Ç –∑–∞–∫—Ä—ã—Ç üõë</b>"))
        else: return await message.edit("–≠—Ç–æ –Ω–µ —á–∞—Ç!")
