from .. import loader, utils


def register(cb):
    cb(TagallMod())


class TagallMod(loader.Module):
    """Perm AutoInvite"""
    strings = {'name': 'hi'}

    async def hicmd(self, event):
        """–ú–æ–¥—É–ª—å –¥–ª—è –∞–≤—Ç–æ–∏–Ω–≤–∞–π—Ç–∞ –≤ —á–∞—Ç–∞—Ö (1 —Ç–µ–∫—Å—Ç)"""
        await event.delete()
        global text
        text = """
–í–æ–∑–º–æ–∂–Ω–æ —Ç—ã –∑–∞–Ω—è—Ç(–∞),–Ω–æ —è –æ—Ç–≤–ª–µ–∫—É —Ç–µ–±—è –±—É–∫–≤–∞–ª—å–Ω–æ –Ω–∞ —Å–µ–∫—É–Ω–¥—É‚ù£ —Ö–æ—á—É –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å —Ç–µ–±—è –≤ —á–∞—Ç —Å –ú–∞—Ñ–∏–µ–π –ë–∞–∫—É –¥–∞–∂–µ –Ω–µ –≤–∑–¥—É–º–∞–π –æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å—Å—èü§í‚ù§Ô∏è‚Äçü©π 
‚úì30 –Ω–µ–æ–±—ã—á–Ω—ã—Ö —Ä–æ–ª–µ–π
‚úì2000 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚úì—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –∏–≥—Ä—ã
‚úì—Å–µ—Ç–∫–∏ —á–∞—Ç–æ–≤
‚úì—Ö–æ—Ä–æ—à–∏–π –∞–∫—Ç–∏–≤
–ò –≤—Å–µ —ç—Ç–æ –ø—Ä–æ –Ω–∞—Å!
‚ù§Ô∏è‚Äçüî• –ü–∏—à–∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –∏ —è —Å–∫–∏–Ω—É —Ç–µ–±–µ —Å—Å—ã–ª–æ—á–∫—Éüñ§
                """
    async def hellocmd(self, event):
        """–ú–æ–¥—É–ª—å –¥–ª—è –∞–≤—Ç–æ–∏–Ω–≤–∞–π—Ç–∞ –≤ —á–∞—Ç–∞—Ö (2 —Ç–µ–∫—Å—Ç)"""
        await event.delete()
        global text
        text = """
–¢–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è —Å—É–ø–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤—Å—Ç—É–ø–∏—Ç—å –≤ —á–∞—Ç —Å –ú–∞—Ñ–∏–µ–π –ë–∞–∫—ÉüßÆ
–í –∫—Ä–∞—Ü–∏—è—Ö –æ –≥—Ä—É–ø–ø–µüìù:
‚úèÔ∏è30 —Å—É–ø–µ—Ä—Å–∫–∏–π —Ä–æ–ª–µ–πüîé
‚úèÔ∏è2000 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤üñå
‚úèÔ∏è–ë–æ–º–±–∏—á–µ—Å–∫–∏–π –∞–∫—Ç–∏–≤üìè
‚úèÔ∏è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–≥—Ä—ã‚úÇÔ∏è
–î–∞–∂–µ –Ω–µ –¥—É–º–∞–π –æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –æ—Ç —Ç–∞–∫–æ–≥–æ –æ—Ç–ª–∏—á–Ω–æ–≥–æ –∏ —Å—É–ø–µ—Ä—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µüìö –ø–∏—à–∏ –æ —Å–≤–æ–µ–º —Å–æ–≥–ª–∞—Å–∏–∏ –∏ —è –æ—Ç–ø—Ä–∞–≤–ª—é —Ç–µ–±–µ —Å—Å—ã–ª–æ—á–∫—Éüì¶
                """
        args = utils.get_args(event)
        chat = await event.get_input_chat()

        if args:
            count = int(args[0].strip())
        else:
            count = 100

        async for x in event.client.iter_participants(chat, limit=count):
            await event.client.send_message(int(x.id), text)
